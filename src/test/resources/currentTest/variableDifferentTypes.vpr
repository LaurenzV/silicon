field val : Int

function rand(a : Int): Int
    ensures result >= a

method test_variable_types(n : Ref)
    requires acc(n.val, 1/2) && n.val >= 0
{
    var i : Ref
    i := new(*)

    if(i.val > 0){
        var k : Int
        k := rand(1)
        i.val := k
    }else{
        var k: Bool
        if(k){
            i.val := rand(2)
        }else{
            i.val := rand(3)
        }
    }

    assert i.val == 5
}

method test_variable_types2(n : Ref)
    requires acc(n.val, 1/2) && n.val >= 0
{
    var i : Ref
    i := new(*)

    if(i.val > 0){
        var k: Bool
        if(k){
            i.val := rand(2)
        }else{
            i.val := rand(3)
        }
        k := true
    }else{
        var k : Int
        k := rand(1)
        i.val := k
    }

    if(i.val > 3){
        var k : Int
        k := rand(2)
        i.val := i.val + k
    }

    assert i.val == 5
}