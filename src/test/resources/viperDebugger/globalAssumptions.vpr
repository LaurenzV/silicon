field f: Int

predicate P(x: Ref) { acc(x.f, wildcard) }

method test_global_assumptions_40(x: Ref, y: Ref)
  requires acc(x.f, 1/2) && acc(y.f, 1/2)
{
  fold P(x)
  exhale acc(x.f, perm(x.f))
  exhale acc(y.f, perm(y.f))
  unfold P(x)
  if (y == x) {
    assert y.f == old(y.f)
  }
}

method test_global_assumptions_50(x: Ref, y: Ref)
{
  inhale acc(P(x), 1/2) && acc(P(y), 1/2)
  //:: ExpectedOutput(exhale.failed:insufficient.permission)
  exhale acc(P(x), wildcard) && acc(P(y), 1/2)
}