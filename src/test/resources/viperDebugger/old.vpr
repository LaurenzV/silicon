field val : Int

method test_old(n : Ref)
    requires acc(n.val) && n.val >= 0
{
    n.val := 2 + n.val

    assert n.val == old(n.val) + 4
}

/*
method test_old2(n : Ref)
    requires acc(n.val, 1/2) && n.val >= 0
{
    var i : Ref
    i := new(*)

    i.val := 2
    i.val := i.val + n.val

    assert old(i.val == n.val)
}
*/